const autoWrap=(a,b)=>{const c=async()=>{const a=/((\S+.)@[a-z]+.[a-z]+)/gi,c=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?/g,d=(a,b="link")=>{const c=document.createElement("a");return c.href="link"===b?a:`mailto:${a}`,"link"===b&&(c.target="_blank",c.setAttribute("rel","noopener, noreferer")),c.innerText=a,c};document.querySelectorAll(b).forEach(b=>{!b.classList.contains("modded")&&b.hasChildNodes&&[...b.childNodes].forEach(e=>{if(3===e.nodeType){let b=e.textContent.split(/(\b(https?|ftp|file):\/\/[-A-Z0-9|ㄱ-ㅎ|ㅏ-ㅣ|가-힣|+&@#\/%?=~_|!:,.;]*[-A-Z0-9|ㄱ-ㅎ|ㅏ-ㅣ|가-힣|+&@#\/%=~_|])/gi);if(1===b.length&&(b=e.textContent.split(a)),1===b.length)return;const f=document.createDocumentFragment();for(let e=0,g=b.length,h=1;e<g;e++)if(0!=h%3){const g=b[e];if(0!=h%2){const a=document.createTextNode(g);f.append(a)}else if(g.includes("http:")){const a=d(g);f.append(a)}else if(/\.(?:jpe?g(:(large|orig))?|gif|png(:(large|orig))?|svg)$/i.test(g)||/(?:\?original)$/i.test(g)){const a=document.createElement("img");a.src=g,a.alt="userContent",f.append(a)}else if(/\.(?:mp4|webm)$/i.test(g)){const a=document.createElement("video");a.src=g,a.autoplay=1,a.muted=1,a.loop=1,a.setAttribute("playsinline",1),f.append(a)}else if(/\.(?:mp3|ogg|wav)$/i.test(g)){const a=document.createElement("audio");a.src=g,a.controls=1,f.append(a)}else if(c.test(g)){const a=document.createElement("div"),b=document.createElement("div"),d=document.createElement("iframe");a.className="youtubevid-wrapper",b.className="resvid",d.src=`https://www.youtube.com/embed/${g.replace(c,"")}?rel=0&playsinline=1`,d.allowFullscreen=1,d.frameBorder=0,b.append(d),a.append(b),f.append(a)}else if(a.test(g)){const a=d(g,"mail");f.append(a)}else{const a=d(g);f.append(a)}h+=1}else h=1;e.parentNode.insertBefore(f,e),e.remove()}b.classList.add("modded")})})};document.addEventListener("DOMContentLoaded",c().then(()=>{const b=document.getElementById(a),d=new MutationObserver(c);b&&d.observe(b,{attributes:!0,childList:!0,subtree:!0})}))};
